/* src/app/globals.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Los ajustes del sidebar ahora se manejan con el contexto y clases Tailwind dinámicas */

/* ============================================
   VARIABLES CSS PARA LIGHT/DARK MODE
   ============================================ */

@layer base {
  :root {
    /* Colores corporativos - Light Mode */
    --color-primary: 229 62 62;        /* #E53E3E */
    --color-primary-hover: 197 48 48;  /* #C53030 */
    --color-primary-light: 254 215 215; /* #FED7D7 */
    
    /* Backgrounds */
    --color-background: 255 255 255;           /* Blanco */
    --color-background-secondary: 249 250 251; /* Gris muy claro */
    --color-background-tertiary: 243 244 246;  /* Gris claro */
    --color-background-elevated: 255 255 255;  /* Para cards elevadas */
    
    /* Foreground (texto) */
    --color-foreground: 17 24 39;      /* Casi negro */
    --color-foreground-muted: 107 114 128; /* Gris medio */
    --color-foreground-subtle: 156 163 175; /* Gris claro */
    
    /* Bordes */
    --color-border: 229 231 235;       /* Gris claro */
    --color-border-hover: 209 213 219; /* Gris medio */
    
    /* Estados */
    --color-success: 16 185 129;
    --color-warning: 245 158 11;
    --color-error: 239 68 68;
    --color-info: 59 130 246;
    
    /* Sombras */
    --shadow-color: 0 0 0;
    
    /* Layout */
    --sidebar-width: 256px;
    --sidebar-collapsed-width: 72px;
    --header-height: 64px;
    --spacing-base: 1rem;
  }

  /* Dark Mode */
  .dark {
    /* Backgrounds oscuros */
    --color-background: 3 7 18;                /* Casi negro */
    --color-background-secondary: 17 24 39;    /* Gris oscuro */
    --color-background-tertiary: 31 41 55;     /* Gris medio oscuro */
    --color-background-elevated: 31 41 55;     /* Para cards en dark */
    
    /* Foreground (texto) claro - IMPORTANTE: Todos deben ser claros */
    --color-foreground: 249 250 251;           /* Casi blanco */
    --color-foreground-muted: 209 213 219;     /* Gris claro */
    --color-foreground-subtle: 156 163 175;    /* Gris medio claro */
    
    /* Bordes oscuros */
    --color-border: 55 65 81;                  /* Gris oscuro */
    --color-border-hover: 75 85 99;            /* Gris medio oscuro */
    
    /* Primary mantiene el rojo pero más brillante */
    --color-primary: 248 113 113;              /* Rojo más claro para dark */
    --color-primary-hover: 239 68 68;
    --color-primary-light: 127 29 29;
  }

  /* ============================================
     ESTILOS BASE
     ============================================ */

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground transition-colors duration-200;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    min-height: 100vh;
  }

  /* Asegurar texto visible en dark mode */
  h1, h2, h3, h4, h5, h6 {
    @apply text-foreground dark:text-white;
  }

  p, span, div, label, td, th, li {
    @apply text-foreground dark:text-gray-100;
  }

  /* Links y botones */
  a {
    @apply text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300;
  }

  button {
    @apply text-foreground dark:text-white;
  }

  /* Inputs y selects */
  input, textarea, select {
    @apply text-foreground dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600;
  }

  /* Placeholder text */
  ::placeholder {
    @apply text-gray-400 dark:text-gray-500;
  }

  /* Scrollbar personalizado */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-600 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-500;
  }

  /* Selección de texto */
  ::selection {
    @apply bg-primary-200 text-primary-900;
  }

  .dark ::selection {
    @apply bg-primary-900 text-primary-100;
  }
}

/* ============================================
   COMPONENTES REUTILIZABLES
   ============================================ */

@layer components {
  /* Botón primario */
  .btn-primary {
    @apply bg-primary-500 text-white hover:bg-primary-600 
           focus:ring-2 focus:ring-primary-500 focus:ring-offset-2
           px-4 py-2 rounded-lg font-medium transition-colors
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Botón secundario */
  .btn-secondary {
    @apply bg-gray-200 text-gray-800 hover:bg-gray-300
           dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600
           px-4 py-2 rounded-lg font-medium transition-colors
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Botón outline */
  .btn-outline {
    @apply border-2 border-primary-500 text-primary-500 
           hover:bg-primary-50 dark:hover:bg-primary-900
           px-4 py-2 rounded-lg font-medium transition-colors
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Card con sombra y hover */
  .card {
    @apply bg-white dark:bg-gray-800 
           rounded-lg shadow-md 
           border border-gray-200 dark:border-gray-700
           transition-all duration-300
           hover:shadow-lg
           p-4 sm:p-6;
  }

  /* Card compacta para móviles */
  .card-compact {
    @apply p-3 sm:p-4 md:p-6;
  }

  /* Tabla responsiva */
  .table-responsive {
    @apply overflow-x-auto -mx-4 sm:mx-0;
  }

  .table-responsive table {
    @apply min-w-full;
  }

  /* Estilo de tabla mejorado para móviles */
  @media (max-width: 640px) {
    .table-responsive table {
      @apply text-sm;
    }
    
    .table-responsive th,
    .table-responsive td {
      @apply px-2 py-3;
    }
  }

  /* Input */
  .input {
    @apply w-full px-3 py-2 
           border border-gray-300 dark:border-gray-600
           bg-white dark:bg-gray-800
           text-gray-900 dark:text-gray-100
           rounded-lg
           focus:ring-2 focus:ring-primary-500 focus:border-transparent
           transition-colors
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 
           rounded-full text-xs font-medium;
  }

  .badge-success {
    @apply bg-green-100 text-green-800 
           dark:bg-green-900 dark:text-green-200;
  }

  .badge-warning {
    @apply bg-yellow-100 text-yellow-800
           dark:bg-yellow-900 dark:text-yellow-200;
  }

  .badge-error {
    @apply bg-red-100 text-red-800
           dark:bg-red-900 dark:text-red-200;
  }

  .badge-info {
    @apply bg-blue-100 text-blue-800
           dark:bg-blue-900 dark:text-blue-200;
  }

  /* Sidebar */
  .sidebar {
    @apply fixed left-0 top-0 h-full
           bg-white dark:bg-gray-900
           border-r border-gray-200 dark:border-gray-800
           transition-all duration-300 ease-in-out
           shadow-lg z-20;
  }

  .sidebar-expanded {
    width: var(--sidebar-width);
  }

  .sidebar-collapsed {
    width: var(--sidebar-collapsed-width);
  }

  /* Content area con sidebar */
  .main-content {
    @apply transition-all duration-300 ease-in-out;
  }

  .main-content-expanded {
    margin-left: var(--sidebar-width);
  }

  .main-content-collapsed {
    margin-left: var(--sidebar-collapsed-width);
  }
}

/* ============================================
   UTILIDADES PERSONALIZADAS
   ============================================ */

@layer utilities {
  /* Gradientes corporativos */
  .gradient-primary {
    background: linear-gradient(135deg, #E53E3E 0%, #C53030 100%);
  }

  .gradient-dark {
    background: linear-gradient(135deg, #1F2937 0%, #111827 100%);
  }

  /* Glassmorphism */
  .glass {
    @apply backdrop-blur-md bg-white/80 dark:bg-gray-900/80;
  }

  /* Animación de carga */
  .loading {
    @apply animate-pulse;
  }

  /* Truncar texto */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Container responsive con márgenes uniformes */
  .container-responsive {
    @apply w-full mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl;
  }

  /* Padding uniforme para páginas */
  .page-padding {
    @apply p-4 sm:p-6 lg:p-8;
  }

  /* Grid responsive */
  .grid-responsive {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6;
  }

  /* Flex responsive */
  .flex-responsive {
    @apply flex flex-col sm:flex-row gap-4;
  }

  /* Stack para móviles */
  .stack-on-mobile {
    @apply flex flex-col md:flex-row gap-4;
  }

  /* Ocultar en móviles */
  .hide-on-mobile {
    @apply hidden sm:block;
  }

  .show-on-mobile {
    @apply block sm:hidden;
  }

  /* Scroll horizontal en móviles para tablas */
  .scroll-x-mobile {
    @apply overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0;
  }

  /* Gráficas responsivas */
  .chart-container {
    @apply w-full h-64 sm:h-80 md:h-96;
    position: relative;
  }

  /* Sidebar responsiva */
  @media (max-width: 768px) {
    .sidebar {
      @apply transform -translate-x-full;
      z-index: 50;
    }
    
    .sidebar.mobile-open {
      @apply translate-x-0;
    }

    .main-content-expanded,
    .main-content-collapsed {
      margin-left: 0 !important;
    }
  }

  /* Overlay para sidebar móvil */
  .sidebar-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden;
  }

  /* Menu hamburguesa */
  .menu-toggle {
    @apply md:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-white dark:bg-gray-800 shadow-lg;
  }

  /* Navegación inferior para móviles */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 md:hidden z-40;
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Safe areas para dispositivos con notch */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Texto responsive */
  .text-responsive {
    @apply text-sm sm:text-base;
  }

  .heading-responsive {
    @apply text-xl sm:text-2xl md:text-3xl;
  }

  /* Botones responsivos */
  .btn-responsive {
    @apply px-3 py-2 text-sm sm:px-4 sm:py-2 sm:text-base;
  }

  /* Modal responsive */
  .modal-responsive {
    @apply w-full max-w-md mx-4 sm:mx-auto;
  }

  /* Dashboard grid responsive */
  .dashboard-grid {
    @apply grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6;
  }

  /* Stat card responsive */
  .stat-grid {
    @apply grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4;
  }
}
